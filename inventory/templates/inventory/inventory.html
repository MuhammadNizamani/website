{% extends 'website/base.html' %}
{% load static %}
{% block content %}
<div class="section hs-green white-text">
    <div class="container">
        <div class="row">
            <div class="col s12">
                <h4>Lager</h4>
                <p>Her kan du søke i lageret vårt. Lyst til å låne noe? Kom innom verkstedet!</p>
            </div>
        </div>
    </div>
</div>

<div class="section">
    <div class="container">
		<form method="get">
            <div class="row">
			    <div class="file-field input-field col s12 m6 l6">
                    <input id="filter_name" name="filter_name" type="text" placeholder="Ting, tang og tare" value="{{ filter_name }}">
                    <label for="filter">Navn</label>
                </div>
                <div class="input-field col s12 m6 l5">
                    <select name="sort_by">
                        <option value="" disabled {% if not sort_by %}selected{% endif %}>Velg sorteringskriterie</option>
                        <option value="stock" {% if sort_by == "stock" %}selected{% endif %}>Lagerbeholdning</option>
                        <option value="name" {% if sort_by == "name" %}selected{% endif %}>Navn</option>
                    </select>
                    <label>Sorter etter</label>
                </div>
                <br>
                <button type="submit" class="waves-effect btn-flat btn-medium waves-light btn white-text hs-green col s12 m12 l1">SØK</button>
			</div>
		</form>

        {% if items %}
        <div class="row">
            {% for item in items %}
            <div class="col s12 m6 l4">
                <div class="card horizontal">
                    <div class="card-content">
                        <a href="{% url 'inventory:item' item.id %}">
                            <h5>{{ item.name }}</h5>
                        </a>
                        <p>
                            {% if item.in_stock %}
                            <i class="material-icons hs-green-text">done</i>
                            <b>{{ item.stock }} stk.</b>
                            {% else %}
                            <i class="material-icons hs-red-text">do_not_disturb</i>
                            <b>Ingen</b>
                            {% endif %}
                             på lager
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <ul class="pagination">
            {% if page_obj.has_previous %}
            <li><a href="?page={{ page_obj.previous_page_number }}"><i class="material-icons">chevron_left</i></a></li>
            {% else %}
            <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
            {% endif %}

            {% for page in page_obj.paginator.page_range %}
            {% if page == page_obj.number %}
            <li class="active hs-green"><a href="#!">{{ page_obj.number }}</a></li>
            {% else %}
            <li><a href="?page={{ page }}&filter_name={{ filter_name }}&sort_by={{ sort_by }}">{{ page }}</a></li>
            {% endif %}	
            {% endfor %}

            {% if page_obj.has_next %}
            <li><a href="?page={{ page_obj.next_page_number }}"><i class="material-icons">chevron_right</i></a></li>
            {% else %}
            <li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
            {% endif %}
        </ul>
        {% else %}
        <div class="row center">
            <div class="col s12">
                <h3>Fant ingenting på lageret :(</h3>
                <p>Men vi fyller nok på ganske snart :)</p>
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}