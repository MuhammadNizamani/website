{% extends "website/base.html" %}
{% load staticfiles %}
{% load check_user_group %}
{% block header %}
<link rel="stylesheet" type="text/css" href="{% static 'news/css/news_style.css' %}">
{% endblock header %}

{% block content %}
<div class="section hs-green">
	<div class="container">
		<div class="row white-text">
			<div class="col s12">
				<h4>Arrangementer</h4>
			</div>
		</div>
	</div>
</div>
{% if request.user|has_group:"member" %}
<div class="section">
	<div class="container">
		<div class="row">
			<div class="col s12">
				<ul class='collection with-header'>
					<li class="collection-header"><h5>Administrator-meny</h5></li>
					<li class="collection-item"><a href="{% url 'news:new' %}"><i class="material-icons">note_add</i>Ny Artikkel</a></li>
					<li class="collection-item"><a href="{% url 'events:new' %}"><i class="material-icons">event</i>Ny Event</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="divider"></div>
{% endif %}
<div class="section block">
	<div class="container">
	{% if page_obj.number == 1 %}
		<div class="row">
			<div class="col s12">
				<h5 class="subheader">Kommende Arrangementer</h5>
				<p>Husk å logge på din konto for å se internarrangementer</p>
				<div class="divider"></div>
			</div>
		</div>
		{% if new_events %}
		{% for event in new_events %}
		<div class="row">
			<div class="col s2 center hide-on-med-and-down">
				{% if event.thumbnail %}
				<img class="circle" style="width:100px; height:100px;" src="{{ event.thumbnail.thumb_url }}">
				{% else %}
				<img class="circle" style="width:100px; height:100px;" src="">
				{% endif %}
			</div>
			<div class="col s10 hide-on-med-and-down">
				<span class="right badge">Starter {{ event.time_start }}</span>
				<a href="{% url 'events:details' event.id %}"><h5 class="no-margin truncate">{{ event.title }}</h5></a>
				<p>
					{% autoescape off %}
					{{ event.ingress_content|truncatechars:200 }}
					{% endautoescape %}
				</p>
			</div>
			<div class="col s12 show-on-med-and-down hide-on-large-only">
				<a href="{% url 'events:details' event.id %}"><h5 class="no-margin truncate">{{ event.title }}</h5></a>
				<p class="badge"><i>Starter {{ event.time_start }}</i><br></p>
				<p>
					{% autoescape off %}
					{{ event.ingress_content|truncatechars:150 }}
					{% endautoescape %}
				</p>
			</div>
		</div>
		<div class="divider"></div>
		<br>
		{% endfor %}
		{% else %}
		<div class="row">
			<div class="col s12">
				<p>Det er for tiden ingen nye arrangementer.</p>
			</div>
		</div>
		{% endif %}
		{% endif %}
		<div class="row">
			<div class="col s12">
				<h5 class="subheader">Tidligere Arrangementer</h5>
				<div class="divider"></div>
			</div>
		</div>
		{% for event in object_list %}
		<div class="row">
			<div class="col s2 center hide-on-med-and-down">
				{% if event.thumbnail %}
				<img class="circle" style="width:100px; height:100px;" src="{{ event.thumbnail.thumb_url }}">
				{% else %}
				<img class="circle" style="width:100px; height:100px;" src="">
				{% endif %}
			</div>
			<div class="col s10 hide-on-med-and-down">
				<span class="right badge">Avsluttet {{ event.time_end }}</span>
				<a href="{% url 'events:details' event.id %}"><h5 class="no-margin truncate">{{ event.title }}</h5></a>
				<p>
					{% autoescape off %}
					{{ event.ingress_content|truncatechars:200 }}
					{% endautoescape %}
				</p>
			</div>
			<div class="col s12 show-on-med-and-down hide-on-large-only">
				<a href="{% url 'events:details' event.id %}"><h5 class="no-margin truncate">{{ event.title }}</h5></a>
				<p class="badge"><i>Avsluttet {{ event.time_end }}</i><br></p>
				<p>
					{% autoescape off %}
					{{ event.ingress_content|truncatechars:150 }}
					{% endautoescape %}
				</p>
			</div>
		</div>
		<div class="divider"></div>
		<br>
		{% endfor %}
	</div>
</div>
<div class="section">
	<div class="container">
		<ul class="pagination">
			{% if page_obj.has_previous %}
			<li><a href="?page={{ page_obj.previous_page_number }}"><i class="material-icons">chevron_left</i></a></li>
			{% else %}
			<li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
			{% endif %}

			{% for page in page_obj.paginator.page_range %}
			{% if page == page_obj.number %}
			<li class="active hs-green"><a href="#!">{{ page_obj.number }}</a></li>
			{% else %}
			<li class=""><a href="?page={{ page }}">{{ page }}</a></li>
			{% endif %}	
			{% endfor %}

			{% if page_obj.has_next %}
			<li><a href="?page={{ page_obj.next_page_number }}"><i class="material-icons">chevron_right</i></a></li>
			{% else %}
			<li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
			{% endif %}

			{% endblock %}
		</ul>
	</div>
</div>
