{% extends 'base.html' %}
{% load staticfiles %}
{% load check_user_group %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="{% static "css/lolliclocks.css" %}">
    <script src="{% static "js/lolliclocks.js" %}"></script>
    <script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
    <script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
{% endblock head %}

{% block content %}
    {% if request.user|has_group:"member" %}
        <script>
            $('#cancelBtn').css('display', 'list-item');
            $('#editBtn').css('display', 'none');
            var $id = {{ event_id }};
            if ($id == 0) {
                $('#deleteBtn').css('display', 'none');
                $('#newBtn').css('display', 'none');
            }
        </script>

        <div style="height: 50px;"></div>

        <div id="edit">
            <div style="
        width:835px;
        min-height:400px;
        margin: 50px auto;
        margin-bottom: 100px;
    ">
                <form action="" method="post" style="width: 835px;">
                    {% csrf_token %}
                    {{ form.errors }}

                    {{ form.title.errors }}
                    <div class="input-field">
                      <label for="{{ form.title.id_for_label }}">Title</label>
                      <input id="{{ form.title.id_for_label }}" name="title" type="text" maxlength="{{ form.fields.title.max_length }}" value="{{ form.title.value }}">
                    </div>

                    {{ form.ingress_content.errors }}
                    {{ form.ingress_content }}

                    {{ form.main_content.errors }}
                    {{ form.main_content }}

                    {{ form.place.errors }}
                    <div class="input-field">
                      <label for="{{ form.place.id_for_label }}">Location</label>
                      <input id="{{ form.place.id_for_label }}" name="place" type="text" maxlength="{{ form.fields.place.max_length }}" value="{{ form.place.value }}">
                    </div>

                    {{ form.place_href.errors }}
                    <div class="input-field">
                      <label for="{{ form.place_href.id_for_label }}">Location URL</label>
                      <input id="{{ form.place_href.id_for_label }}" name="place_href" type="text" maxlength="{{ form.fields.place_href.max_length }}" value="{{ form.place_href.value }}">
                    </div>

                    {{ form.date.errors }}
                    <div class="input-field">
                      <label for="{{ form.date.id_for_label }}">Date</label>
                      <input id="{{ form.date.id_for_label }}" class="datepicker" name="date" type="date" value="{{ form.date.value }}">
                    </div>

                    {{ form.event_id.errors }}
                    {{ form.event_id }}

                    {{ form.time_start.errors }}
                    <div class="input-field">
                      <label for="{{ form.time_start.id_for_label }}">Start</label>
                      <input id="{{ form.time_start.id_for_label }}" name="time_start" type="text" value="{{ form.time_start.value }}">
                    </div>

                    {{ form.time_end.errors }}
                    <div class="input-field">
                      <label for="{{ form.time_end.id_for_label }}">End</label>
                      <input id="{{ form.time_end.id_for_label }}" name="time_end" type="text" value="{{ form.time_end.value }}">
                    </div>

                    {{ form.thumbnail.errors }}
                    <div class="input-field">
                      <label for="{{ form.thumbnail.id_for_label }}">Thumbnail</label>
                      <input id="{{ form.thumbnail.id_for_label }}" name="thumbnail" type="text" value="{{ form.thumbnail.value }}">
                    </div>

                    <p><label></label>
                      <img id="thumbnailPicker" src="" style="width:360px; height:200px;"></img>
                    </p>

                    <script>
                      $('.datepicker').pickadate({
                        selectMonths: true, // Creates a dropdown to control month
                        selectYears: 15 // Creates a dropdown of 15 years to control year
                      });
                      $('#{{ form.time_start.id_for_label }}').lolliclock({autoclose:true, hour24:true});
                      $('#{{ form.time_end.id_for_label }}').lolliclock({autoclose:true, hour24:true});
                    </script>
                    <script type="text/javascript" src="{% static "js/edit_event.js" %}"></script>

                    <button id="submit" class="btn waves-effect waves-light" type="submit" name="action">Lagre</button>
                </form>
            </div>
        </div>
    {% endif %}
{% endblock content %}
