{% extends 'website/base.html' %}
{% load staticfiles %}
{% load check_user_group %}
{% block content %}
<div class="section hs-green">
	<div class="container">
		<div class="row">
			<div class="col s12 white-text center">
				<h4>Endre brukerprofilen til {{ profile.user.get_full_name }}</h4>
			</div>
		</div>
	</div>
</div>
<div class="section no-pad-bot">
	<div class="container">
		<div class="row">
			<div class="col s12">
				{% if profile.image %}
				<img class="circle" src="{{ profile.image.url }}" height="300">
				{% else %}
				<img class="circle" src="{% static 'website/img/misc/default.png' %}" height="300">
				{% endif %}
			</div>
		</div>
		<div class="row">
			<form  enctype="multipart/form-data" method="post" action="" onchange="condOption()">
				{% csrf_token %}
				{{ formset.management_form }}
				{% for form in formset %}
					{% for field in form.visible_fields %}
						{% if field.label == "Profilbilde" %}
							<div class="col s12">
								{{ field }}
							</div>
							<div class="divider"></div>
						{% else %}
							<div class="col s12 input-field">
								{{ field }}
								<label for="{{field.id_for_label }}">{{ field.label }}</input>
							</div>
						{% endif %}
					{% endfor %}
					{% for field in form.hidden_fields %}

								{{ field }}
					{% endfor %}
				{% endfor %}

				{% for field in form %}
					<div class="col s12 input-field">
						{{ field }}
						<label for="{{field.id_for_label }}">{{ field.label }}</input>
					</div>
				{% endfor %}
				<input type="submit" value="Submit"/>
			</form>
		</div>
	</div>
</div>
<script>
	var groupSelect = document.querySelector('#id_profile-0-group');
	var nameGetter = document.querySelector('#id_profile-0-auto_name');
	var vaktGetter = document.querySelector('#id_profile-0-duty');
	var skillGetter = document.querySelector('#id_profile-0-skills');
	var autoDutyGetter = document.querySelector('#id_profile-0-auto_duty');
	var instance = M.FormSelect.init(groupSelect);
	var instance = M.FormSelect.init(nameGetter);
	var instance = M.FormSelect.init(vaktGetter);
	var instance = M.FormSelect.init(skillGetter);
	var instance = M.FormSelect.init(autoDutyGetter);
	
	autoDutyGetter.addEventListener('click', function() {
		vaktGetter.hide();
	});
</script>
{% endblock %}

