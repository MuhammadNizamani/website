{% extends 'website/base.html' %}
{% load staticfiles %}
{% load check_user_group %}

{% block content %}
<div class="section hs-green">
	<div class="container">
		<div class="row">
			<div class="col s12">
				<h1 class="white-text">Medlemmer i Hackerspace</h1>
			</div>
		</div>
		<form method="get">
		{% csrf_token %}
		<div class="row card-panel">
			<div class="col s10">
				<div class="input-field">
					<input name="filter" maxlength="100" value="{{ filter }}" type="text">
				</div>
			</div>
			<div class="col s2">
				<div class="input-field">
					<button id="searchButton" type="submit" name="action" class="waves-effect waves-light btn btn-flat white-text hs-green">SØK</button>
				</div>
			</div>
		</form>
	</div>
</div>
</div>
<div class="section">
	<div class="container">
		<div class="row">
			{% for profile in object_list %}
			<div class="col s12 m6 l4">
				<div class="card-container">
					<div class="card medium">
						<div class="card-image waves-effect waves-block waves-light">
							<a href={% url 'userprofile:profile_by_id' profile.user.id %}>
								{% if profile.image %}
								{# profile has image, show picture #}
								<img class="activator" src="{{ profile.image.url }}">
								{% else %}
								{# profile.images is None, show default.png #}
								<img class="activator" src="{% static "website/img/misc/default.png" %}">
								{% endif %}
							</a>
						</div>
						<div class="card-content">
							<a href={% url 'userprofile:profile_by_id' profile.user.id %}>{{ profile.user.first_name }}</a>
							<div>
								{% for group in profile.group.all %}
								{{ group.title|linebreaks }}
								{% endfor %}
							</div>
							{% for skill in profile.skills.all %}
							<a class="chip" href="{% url 'userprofile:skill' skill.title %}" style="color: black">
								{{ skill.title }}
								{% if skill.icon %}
								<img class="chip-img" src="{{ skill.icon.url }}" alt="Skill tag">
								{% endif %}
							</a>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
			{% empty %}
				<h5>Det finnes ingen profiler etter dine søkekriterier</h5>
			{% endfor %}
		</div>
	</div>
</div>

<div class="section">
	<div class="container">
		<ul class="pagination">
			{% if page_obj.has_previous %}
			<li><a href="?page={{ page_obj.previous_page_number }}"><i class="material-icons">chevron_left</i></a></li>
			{% else %}
			<li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
			{% endif %}

			{% for page in page_obj.paginator.page_range %}
			{% if page == page_obj.number %}
			<li class="active hs-green"><a href="#!">{{ page_obj.number }}</a></li>
			{% else %}
			<li class=""><a href="?page={{ page }}">{{ page }}</a></li>
			{% endif %}	
			{% endfor %}

			{% if page_obj.has_next %}
			<li><a href="?page={{ page_obj.next_page_number }}"><i class="material-icons">chevron_right</i></a></li>
			{% else %}
			<li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
			{% endif %}

			{% endblock %}
		</ul>
	</div>
</div>
